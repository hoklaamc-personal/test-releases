# name: Deploy Staging

# concurrency: test-staging-deployment

# on:
#   push:
#     branches:
#       - staging
#   workflow_dispatch:
#     inputs:
#       commit:
#         description: Commit SHA1
#         required: true
#         default: "undefined"
#         type: string

# jobs:
#   deploy:
#     runs-on: ubuntu-latest
#     steps:
#       - name: Run post-deploy script
#         run: |
#           echo "Run deploy script. Commit: $GITHUB_SHA"

name: Deploy Staging

concurrency: test-staging-deployment

on:
  push:
    branches:
      - staging
  workflow_dispatch:
    inputs:
      commit:
        description: 'Commit SHA (default: latest from master)'
        required: false
        default: ''
        type: string

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Deploy
        run: |
          # Use the commit input value if provided, otherwise get the latest commit SHA from master
          COMMIT_SHA=${{ github.event.after }}
          if [ -n "${{ github.event.inputs.commit }}" ]; then
            COMMIT_SHA=${{ github.event.inputs.commit }}
          fi

          # Your custom script or commands using the COMMIT_SHA variable
          echo "Using commit SHA: $COMMIT_SHA"